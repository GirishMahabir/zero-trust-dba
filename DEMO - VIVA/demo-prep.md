# Demonstration Preparation
1. **Brief Introduction (30 seconds)**
   - Quickly introduce the core concept of Zero Trust Database Administration with your setup involving ProxySQL, MariaDB, and the Elastic Stack.
   
   Commands:
   ```bash
   make start
   make prepare
   ```
2. **Zero-Trust Verification (1 minute)**
   - Showcase an attempt to access the database without proper verification to demonstrate the principle of least privilege in action. Highlight the system's immediate denial of access.

   Commands:
   ```bash
   # Show that we cannot connect directly to the database container.
   mysql -h127.0.0.1 -P3306 -uroot -p$MARIADB_ROOT_PASSWORD
   
   docker inspect -f '{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}' zero-trust-dba-project-mariadb-master-1

   # Try with the container IP
    mysql -h<> -P3306 -uroot -p$MARIADB_ROOT_PASSWORD
   ```

    - Show that we can connect to the database via proxysql
    ```bash
    mysql -h127.0.0.1 -P6033 -udata_ops -paer6eethe7aiShe6uoqu4ieTeef6aig3 --prompt='PSSQL data_ops> '
    ```

    - Demonstrate the allowed commands and commands that are not allowed.
    ```sql
    show databases; -- Not allowed
    use employees; -- Allowed
    show tables; -- Not allowed
    select first_name, last_name from employees limit 10; -- Allowed
    select hire_date from employees limit 5;
    ```

    - Show how a DBA would connect to the database and his available commands.
    ```bash
    mysql -h127.0.0.1 -P6033 -udba -pgoong1eeQuooW0xeungooPheer9raacu
    ```
    ```sql
    SHOW MASTER STATUS\G
    SHOW SLAVE STATUS\G
    SHOW FULL PROCESSLIST\G
    
    -- Not allowed;
    show databases;
    use employees;
    show tables;
    select first_name, last_name from employees limit 10;
    ```

3. **Data Encryption in Transit (1 minute)**
   - Demonstrate data encryption in transit:
     - Quickly show the configuration that ensures encryption.
     - Use a prepared screenshot or a brief live capture of network traffic to show encrypted data being transmitted, illustrating the effectiveness of in-transit encryption.

    `Open WireShark and load capture file.`

4. **Real-time Monitoring and Alerting (1 minute)**
   - Trigger a simulated fault (e.g., an unauthorized access attempt) and display the alert generated by your monitoring system. This highlights the system's ability to detect and respond to potential threats instantly.

    - SSH Slimulate: `docker exec -udba -it zero-trust-dba-project-mariadb-slave-1 bash`
    - Launch Script: `sudo /opt/utils/backup-db.sh employees`
    - Explain Script and how it is protected.


5. **SQL Injection Defense (1 minute)**
   - Execute a pre-planned SQL injection attempt and showcase how ProxySQL effectively blocks it. Highlight this as a critical defense mechanism against common security threats.

    - Explain that the user's allowed to commect to proxysql should be defined by an admin on proxysql, which is only accessible from withing the proxysql container and also defined on the database server.

    - Now, If we assume a legitimate user is trying to access the database, we can show that the user is able to connect to the database and execute queries. But only queries that has been allowed by the admin.
    So, anything that doesn't match the allowed queries will be blocked by proxysql by default.

    Example:
    ```bash
    mysql -h127.0.0.1 -P6033 -udata_ops -paer6eethe7aiShe6uoqu4ieTeef6aig3 --prompt='PSSQL data_ops> '
    ```
    ```sql
    select * from  employees where ((first_name='' or '1' = '1'));
    SELECT /*!32302 1/0, */ 494978 FROM employees;
    select * from  employees where ((first_name='Bezalel')) and hire_date='1996-11-27' limit 2;
    ```

6. **Closing Remarks (30 seconds)**
   - Conclude by emphasizing the robustness of your Zero Trust setup against unauthorized access, data breaches, and SQL injections. Mention that these features ensure compliance with the highest security standards and pave the way for scalable, secure database administration.

# Terminal Splits